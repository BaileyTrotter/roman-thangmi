#/usr/bin/env python3
# -*- coding: utf-8 -*-

from collections import OrderedDict

d2r_dict=OrderedDict([
#accounting for character differences

('ṭh', 'ṭh'),
('ṭ', 'ṭ'),
('ḍh', 'ḍh'),
('ḍ', 'ḍ'),
('ṇ', 'ṇ'),
('ṣ', 'ṣ'),
('ś', 'ś'),
('ā', 'ā'),
('Ɂ', ''),

#the following part might not be necessary, already taken care of above. 
('ĩ', 'ĩ'),
('ũ', 'ũ'),
('ẽ', 'ẽ'),
('õ', 'õ'),
('ã', 'ã'),

('ẵ', 'ă ̃'),
('aĩ', 'ai ̃'),
('aũ', 'au ̃'),
('ĩ', 'i ̃'),
('ũ', 'u ̃'),
('ẽ', 'e ̃'),
('õ', 'o ̃'),
('ã', 'a ̃'),
(' ̃', 'ं'),

#beginning bits above
#rest of the dictionary below

('khā', 'खा'),
('kā', 'का'),
('ghā', 'घा'),
('gā', 'गा'),
('ŋā', 'ङा'),
('chā', 'छा'),
('cā', 'चा'),
('jhā', 'झा'),
('jā', 'जा'),
('ṭhā', 'ठा'),
('ṭā', 'टा'),
('ḍhā', 'ढा'),
('ḍā', 'डा'),
('ṇā', 'णा'),
('thā', 'था'),
('tā', 'ता'),
('dhā', 'धा'),
('dā', 'दा'),
('nā', 'ना'),
('phā', 'फा'),
('pā', 'पा'),
('bhā', 'भा'),
('bā', 'बा'),
('mā', 'मा'),
('yā', 'या'),
('rā', 'रा'),
('lā', 'ला'),
('wā', 'वा'),
('śā', 'शा'),
('ṣā', 'षा'),
('sā', 'सा'),
('hā', 'हा'),
('khai', 'खै'),
('kai', 'कै'),
('ghai', 'घै'),
('gai', 'गै'),
('ŋai', 'ङै'),
('chai', 'छै'),
('cai', 'चै'),
('jhai', 'झै'),
('jai', 'जै'),
('ṭhai', 'ठै'),
('ṭai', 'टै'),
('ḍhai', 'ढै'),
('ḍai', 'डै'),
('ṇai', 'णै'),
('thai', 'थै'),
('tai', 'तै'),
('dhai', 'धै'),
('dai', 'दै'),
('nai', 'नै'),
('phai', 'फै'),
('pai', 'पै'),
('bhai', 'भै'),
('bai', 'बै'),
('mai', 'मै'),
('yai', 'यै'),
('rai', 'रै'),
('lai', 'लै'),
('wai', 'वै'),
('vai', 'वै'), 
('śai', 'शै'),
('ṣai', 'षै'),
('sai', 'सै'),
('hai', 'है'),
('khau', 'खौ'),
('kau', 'कौ'),
('ghau', 'घौ'),
('gau', 'गौ'),
('ŋau', 'ङौ'),
('chau', 'छौ'),
('cau', 'चौ'),
('jhau', 'झौ'),
('jau', 'जौ'),
('ṭhau', 'ठौ'),
('ṭau', 'टौ'),
('ḍhau', 'ढौ'),
('ḍau', 'डौ'),
('ṇau', 'णौ'),
('thau', 'थौ'),
('tau', 'तौ'),
('dhau', 'धौ'),
('dau', 'दौ'),
('nau', 'नौ'),
('phau', 'फौ'),
('pau', 'पौ'),
('bhau', 'भौ'),
('bau', 'बौ'),
('mau', 'मौ'),
('yau', 'यौ'),
('rau', 'रौ'),
('lau', 'लौ'),
('wau', 'वौ'),
('śau', 'शौ'),
('ṣau', 'षौ'),
('sau', 'सौ'),
('hau', 'हौ'),
('khi', 'खि'),
('ki', 'कि'), 
('ghi', 'घि'),
('gi', 'गि'), 
('ŋi', 'ङि'), 
('chi', 'छि'),
('ci', 'चि'),
('jhi', 'झि'),
('ji', 'जि'), 
('ṭhi', 'ठि'), 
('ṭi', 'टि'),
('ḍhi', 'ढि'),
('ḍi', 'डि'),
('ṇi', 'णि'),
('thi', 'थि'),
('ti', 'ति'),
('dhi', 'धि'),
('di', 'दि'),  
('ni', 'नि'),
('phi', 'फि '),
('pi', 'पि'),
('bhi', 'भि'),
('bi', 'बि'),
('mi', 'मि'),
('yi', 'यि'),
('ri', 'रि'),
('li', 'वि'),
('wi', 'वि'), 
('śi', 'शी'),
('ṣi', 'षि'), 
('si', 'सि '),
('hi', 'हि '),
('khu', 'खु'),
('ku', 'कु'),
('ghu', 'घु'),
('gu', 'गु'),
('ŋu', 'ङु'),
('chu', 'छु'),
('cu', 'चु'),
('jhu', 'झु'),
('ju', 'जु'),
('ṭhu', 'ठु'),
('ṭu', 'टु'),
('ḍhu', 'ढु'),
('ḍu', 'डु'),
('ṇu', 'णु'),
('thu', 'थु'),
('tu', 'तु'),
('dhu', 'धु'),
('du', 'दु'),
('nu', 'नु'),
('phu', 'फु'),
('pu', 'पु'),
('bhu', 'भु'),
('bu', 'बु'),
('mu', 'मु'),
('yu', 'यु'),
('ru', 'रु'),
('lu', 'लु'),
('wu', 'वु'),
('śu', 'शु'),
('ṣu', 'षु'),
('su', 'सु'),
('hu', 'हु'),
('khe', 'खे'),
('ke', 'के'),
('ghe', 'घे'),
('ge', 'गे'),
('ŋe', 'ङे'),
('che', 'छे'),
('ce', 'चे'),
('jhe', 'झे'),
('je', 'जे'),
('ṭhe', 'ठे'),
('ṭe', 'टे'),
('ḍhe', 'ढे'),
('ḍe', 'डे'),
('ṇe', 'णे'),
('the', 'थे'),
('te', 'ते'),
('dhe', 'धे'),
('de', 'दे'),
('ne', 'ने'),
('phe', 'फे'),
('pe', 'पे'),
('bhe', 'भे'),
('be', 'बे'),
('me', 'मे'),
('ye', 'ये'),
('re', 'रे'),
('le', 'ले'),
('we', 'वे'),
('śe', 'शे'),
('ṣe', 'षे'),
('se', 'से'),
('he', 'हे'),
('kho', 'खो'),
('ko', 'को'),
('gho', 'घो'),
('go', 'गो'),
('ŋo', 'ङो'),
('cho', 'छो'),
('co', 'चो'),
('jho', 'झो'),
('jo', 'जो'),
('ṭho', 'ठो'),
('ṭo', 'टो'),
('ḍho', 'ढो'),
('ḍo', 'डो'),
('ṇo', 'णो'),
('tho', 'थो'),
('to', 'तो'),
('dho', 'धो'),
('do', 'दो'),
('no', 'नो'),
('pho', 'फो'),
('po', 'पो'),
('bho', 'भो'),
('bo', 'बो'),
('mo', 'मो'),
('yo', 'यो'),
('ro', 'रो'),
('lo', 'लो'),
('wo', 'वो'),
('śo', 'शो'),
('ṣo', 'षो'),
('so', 'सो'),
('ho', 'हो'),
('kha', 'ख'),
('ka', 'क'),
('gha', 'घ'),
('ga', 'ग'),
('ŋa', 'ङ'),
('cha', 'छ'),
('ca', 'च'),
('jha', 'झ'),
('ja', 'ज'),
('ṭha', 'ठ'),
('ṭa', 'ट'),
('ḍha', 'ढ'),
('ḍa', 'ड'),
('ṇa', 'ण'),
('tha', 'थ'),
('ta', 'त'),
('dha', 'ध'),
('da', 'द'),
('na', 'न'),
('pha', 'फ'),
('pa', 'प'),
('bha', 'भ'),
('ba', 'ब'),
('ma', 'म'),
('ya', 'य'),
('ra', 'र'),
('la', 'ल'),
('wa', 'व'),
('śa', 'श'),
('ṣa', 'ष'),
('sa', 'स'),
('ha', 'ह'),

('kh', 'ख्'),
('k', 'क्'),
('gh', 'घ्'),
('g', 'ग्'),
('ŋ', 'ङ्'),

('ch', 'छ्'),
('c', 'च्'),
('jh', 'झ्'),
('j', 'ज्'),

('ṭh', 'ठ्'),
('ṭ', 'ट्'),
('ḍh', 'ढ्'),
('ḍ', 'ड्'),
('ṇ', 'ण्'),

('th', 'थ्'),
('t', 'त्'),
('dh', 'ध्'),
('d', 'द्'),
('n', 'न्'),

('ph', 'फ्'),
('p', 'प्'),
('bh', 'भ्'),
('b', 'ब्'),
('m', 'म्'),

('y', 'य्'),
('r', 'र्'),
('l', 'ल्'),
('w', 'व्'),
('ś', 'श्'),
('ṣ', 'ष्'),
('s', 'स्'),
('h', 'ह्'),

('ā', 'आ'),
('ai', 'ऐ'),
('au', 'औ'),
('i', 'इ'),
('u', 'उ'),
('e', 'ए'),
('o', 'ओ'),
('a', 'अ'),

#to delete sense number
('1', ''),
('2', ''),
('3', ''),
('4', ''),

('् ', ' '),
('्,', ','),
('्)', ')'),
('्-', '-'),
('्;', ';'),
('्\n', '\n'), 
    
#deletes U+200D ZERO WIDTH JOINER [ZWJ] and U+200C ZERO WIDTH NON-JOINER [ZWNJ] which were showing up untransliterated
('‍', ''),
('‌', ''),
])

def is_devanagari(text):
    text = "".join(i for i in text if i.isalnum())
    return (sum(True for i in text if ord(i) in range(2304, 2432)) / len(text)) >= 0.5

def romanize_text(text):
    dict = {}
    if type(text) == float:
        return
    for key, value in d2r_dict.items():
        text = text.replace(key, value)
        dict[value] = text

    print (text)
    return (text)

#export
import sys

stdoutOrigin = sys.stdout
sys.stdout = open('roman.csv', 'w')
#import
with open('thangmi.csv', 'r') as f:
    f_contents = f.read()

romanize_text(f_contents)
